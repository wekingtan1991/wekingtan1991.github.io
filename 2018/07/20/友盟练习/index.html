<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>友盟练习 | 你好，我叫weking | 不怕千万人阻挡，最怕自己会投降</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Android,友盟">
    <meta name="description" content="友盟 + SDK Common 集成自动集成在 app 的 build.gradle 中添加： 12compile &apos;com.umeng.sdk:common:latest.integration&apos;compile &apos;com.umeng.sdk:utdid:1.1.5.3&apos; 如果无法正常集成则在 project 的 build.gradle 中添加： 12345allprojects &amp;#123;">
<meta name="keywords" content="Android,友盟">
<meta property="og:type" content="article">
<meta property="og:title" content="友盟练习">
<meta property="og:url" content="http://yoursite.com/2018/07/20/友盟练习/index.html">
<meta property="og:site_name" content="你好，我叫weking">
<meta property="og:description" content="友盟 + SDK Common 集成自动集成在 app 的 build.gradle 中添加： 12compile &apos;com.umeng.sdk:common:latest.integration&apos;compile &apos;com.umeng.sdk:utdid:1.1.5.3&apos; 如果无法正常集成则在 project 的 build.gradle 中添加： 12345allprojects &amp;#123;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-07-21T08:47:14.915Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="友盟练习">
<meta name="twitter:description" content="友盟 + SDK Common 集成自动集成在 app 的 build.gradle 中添加： 12compile &apos;com.umeng.sdk:common:latest.integration&apos;compile &apos;com.umeng.sdk:utdid:1.1.5.3&apos; 如果无法正常集成则在 project 的 build.gradle 中添加： 12345allprojects &amp;#123;">
    
        <link rel="alternate" type="application/atom+xml" title="你好，我叫weking" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/husky.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">wekingtan</h5>
          <a href="mailto:wekingtan@foxmail.com" title="wekingtan@foxmail.com" class="mail">wekingtan@foxmail.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                文章
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                归类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/wekingtan1991" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/friendlink"  >
                <i class="icon icon-lg icon-heart"></i>
                链接
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">友盟练习</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">友盟练习</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-07-20T14:49:12.000Z" itemprop="datePublished" class="page-time">
  2018-07-20
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Common-集成"><span class="post-toc-number">1.</span> <span class="post-toc-text">Common 集成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自动集成"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">自动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#手动集成"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">手动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#权限授予"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">权限授予</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#混淆设置"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">混淆设置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#查看日志"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">查看日志</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#初始化及通用接口"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">初始化及通用接口</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#初始化"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">初始化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法一"><span class="post-toc-number">1.6.1.1.</span> <span class="post-toc-text">方法一</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#方法二"><span class="post-toc-number">1.6.1.2.</span> <span class="post-toc-text">方法二</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Channel渠道的使用规范"><span class="post-toc-number">1.6.1.3.</span> <span class="post-toc-text">Channel渠道的使用规范</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Channel渠道的命名规范"><span class="post-toc-number">1.6.1.4.</span> <span class="post-toc-text">Channel渠道的命名规范</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通用接口"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">通用接口</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#设置Log开关"><span class="post-toc-number">1.6.2.1.</span> <span class="post-toc-text">设置Log开关</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#设置日志加密"><span class="post-toc-number">1.6.2.2.</span> <span class="post-toc-text">设置日志加密</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#移动统计集成"><span class="post-toc-number">2.</span> <span class="post-toc-text">移动统计集成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自动集成-1"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">自动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#手动集成-1"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">手动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#初始化及通用接口-1"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">初始化及通用接口</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#初始化-1"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">初始化</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置场景类型接口"><span class="post-toc-number">2.3.2.</span> <span class="post-toc-text">设置场景类型接口</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置-secretkey"><span class="post-toc-number">2.3.3.</span> <span class="post-toc-text">设置 secretkey</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置-Session-启动、App-使用时长等基础数据统计接口-API"><span class="post-toc-number">2.3.4.</span> <span class="post-toc-text">设置 Session 启动、App 使用时长等基础数据统计接口 API:</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#设置-session-间隔时长接口"><span class="post-toc-number">2.3.5.</span> <span class="post-toc-text">设置 session 间隔时长接口</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#消息推送集成"><span class="post-toc-number">3.</span> <span class="post-toc-text">消息推送集成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#在友盟创建应用"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">在友盟创建应用</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自动集成-2"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">自动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#手动集成-2"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">手动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#初始化及通用接口-2"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">初始化及通用接口</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#初始化-2"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">初始化</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#注册推送服务"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">注册推送服务</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#统计应用启动数据"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">统计应用启动数据</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置ApplicationId"><span class="post-toc-number">3.8.</span> <span class="post-toc-text">配置ApplicationId</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#社会化分享和第三方登录集成"><span class="post-toc-number">4.</span> <span class="post-toc-text">社会化分享和第三方登录集成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#自动集成-3"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">自动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#手动集成-3"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">手动集成</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#添加回调-Activity"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">添加回调 Activity</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#微信"><span class="post-toc-number">4.3.1.</span> <span class="post-toc-text">微信</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#QQ-和新浪"><span class="post-toc-number">4.3.2.</span> <span class="post-toc-text">QQ 和新浪</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置-Android-Manifest-XML"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">配置 Android Manifest.XML</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#微信-1"><span class="post-toc-number">4.4.1.</span> <span class="post-toc-text">微信</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#权限添加"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">权限添加</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Android6-0权限适配"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">Android6.0权限适配</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#初始化-3"><span class="post-toc-number">4.7.</span> <span class="post-toc-text">初始化</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#签名配置"><span class="post-toc-number">4.8.</span> <span class="post-toc-text">签名配置</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#分享面板设置"><span class="post-toc-number">4.9.</span> <span class="post-toc-text">分享面板设置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#带面板"><span class="post-toc-number">4.9.1.</span> <span class="post-toc-text">带面板</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#不带面板"><span class="post-toc-number">4.9.2.</span> <span class="post-toc-text">不带面板</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#回调监听"><span class="post-toc-number">4.9.3.</span> <span class="post-toc-text">回调监听</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第三方登录"><span class="post-toc-number">4.10.</span> <span class="post-toc-text">第三方登录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#获取用户资料"><span class="post-toc-number">4.10.1.</span> <span class="post-toc-text">获取用户资料</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#授权回调"><span class="post-toc-number">4.10.2.</span> <span class="post-toc-text">授权回调</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-友盟练习"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">友盟练习</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-07-20 22:49:12" datetime="2018-07-20T14:49:12.000Z"  itemprop="datePublished">2018-07-20</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Android/">Android</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p><a href="https://developer.umeng.com/sdk" target="_blank" rel="noopener">友盟 + SDK</a></p>
<h1 id="Common-集成"><a href="#Common-集成" class="headerlink" title="Common 集成"></a>Common 集成</h1><h2 id="自动集成"><a href="#自动集成" class="headerlink" title="自动集成"></a>自动集成</h2><p>在 app 的 build.gradle 中添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'com.umeng.sdk:common:latest.integration'</span></span><br><span class="line">compile <span class="string">'com.umeng.sdk:utdid:1.1.5.3'</span></span><br></pre></td></tr></table></figure>
<p>如果无法正常集成则在 project 的 build.gradle 中添加：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">            mavenCentral()     </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 Android Studio 3.1 及以上版本开发环境下，指定引用最新版本依赖写法 <code>latest.integration</code> 可能导致下载库超时，此时需要指定具体版本号。 </p>
<h2 id="手动集成"><a href="#手动集成" class="headerlink" title="手动集成"></a>手动集成</h2><ul>
<li>选择 SDK 功能组件并下载后，解压.zip文件得到相应组件包（例如：umeng-common-x.x.x.jar、umeng-analytics-x.x.x.jar等），在 Android Studio 的项目工程 libs 目录中拷入相关组件jar包；</li>
<li>右键 Android Studio 的项目工程 —&gt; 选择 <code>Open Module Settings</code> —&gt; 在  <code>Project Structure</code> 弹出框中 —&gt; 选择 <code>Dependencies</code>选项卡 —&gt; 点击左下“＋” —&gt; 选择组件包类型 —&gt; 引入相应的组件包；</li>
</ul>
<p>注意：umeng-common-x.x.x.jar为基础组件包，必须导入。 </p>
<h2 id="权限授予"><a href="#权限授予" class="headerlink" title="权限授予"></a>权限授予</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 必须的权限 --&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.ACCESS_WIFI_STATE"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.READ_PHONE_STATE"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.INTERNET"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 推荐的权限 --&gt;</span><br><span class="line">&lt;!-- 添加如下权限，以便使用更多的第三方SDK和更精准的统计数据 --&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.ACCESS_COARSE_LOCATION"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.ACCESS_FINE_LOCATION"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.CHANGE_WIFI_STATE"</span> /&gt;</span><br><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="混淆设置"><a href="#混淆设置" class="headerlink" title="混淆设置"></a>混淆设置</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-keep <span class="class"><span class="keyword">class</span> <span class="title">com</span>.<span class="title">umeng</span>.** </span>&#123;*;&#125;</span><br></pre></td></tr></table></figure>
<h2 id="查看日志"><a href="#查看日志" class="headerlink" title="查看日志"></a>查看日志</h2><h2 id="初始化及通用接口"><a href="#初始化及通用接口" class="headerlink" title="初始化及通用接口"></a>初始化及通用接口</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>在项目工程中新建自定义 application 中的 <code>onCreate()</code> 中添加以下两个方法之一。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UMApplication</span> <span class="keyword">extends</span> <span class="title">Application</span></span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        <span class="comment">//doSomething……</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意：一定要在主进程进行该项操作，如果您使用到 PUSH （消息推送），还需在推送进程（channel 进程）同样进行该项操作。</p>
<h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 初始化common库</span></span><br><span class="line"><span class="comment">* 参数1:上下文，不能为空</span></span><br><span class="line"><span class="comment">* 参数2:设备类型，UMConfigure.DEVICE_TYPE_PHONE为手机、</span></span><br><span class="line"><span class="comment">* UMConfigure.DEVICE_TYPE_BOX为盒子，默认为手机</span></span><br><span class="line"><span class="comment">* 参数3:Push推送业务的secret</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">UMConfigure.init(<span class="keyword">this</span>, UMConfigure.DEVICE_TYPE_PHONE, <span class="string">" push secret number</span></span><br><span class="line"><span class="string">                 "</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果项目的 AndroidManifest 文件中已经配置【友盟+】的 AppKey 和 Channel，则使用该方法初始化，同时不必再次传入 AppKey 和 Channel 两个参数。 </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta-data </span><br><span class="line">android:value=<span class="string">"58edcfeb310c93091c000be2"</span> android:name=<span class="string">"UMENG_APPKEY"</span>/&gt;</span><br><span class="line">&lt;meta-data </span><br><span class="line">android:value=<span class="string">"Umeng"</span> android:name=<span class="string">"UMENG_CHANNEL"</span>/&gt;</span><br></pre></td></tr></table></figure>
<h4 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 初始化common库</span></span><br><span class="line"><span class="comment">* 参数1:上下文，不能为空</span></span><br><span class="line"><span class="comment">* 参数2:【友盟+】 AppKey</span></span><br><span class="line"><span class="comment">* 参数3:【友盟+】 Channel</span></span><br><span class="line"><span class="comment">* 参数4:设备类型，UMConfigure.DEVICE_TYPE_PHONE为手机、UMConfigure.DEVICE_TYPE_BOX为盒子，默认为手机</span></span><br><span class="line"><span class="comment">* 参数5:Push推送业务的secret</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">UMConfigure.init(<span class="keyword">this</span>, <span class="string">"58edcfeb310c93091c000be2"</span>, <span class="string">"Umeng"</span>, UMConfigure.DEVICE_TYPE_PHONE, <span class="string">"1fe6a20054bcef865eeb0991ee84525b"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="Channel渠道的使用规范"><a href="#Channel渠道的使用规范" class="headerlink" title="Channel渠道的使用规范"></a>Channel渠道的使用规范</h4><p>每台设备仅记录首次安装激活的渠道，在其他渠道再次安装不会重复计量。 所以在测试不同的渠道的时候，请使用不同的设备来分别测试不要改变’UMENG_CHANNEL’。 </p>
<h4 id="Channel渠道的命名规范"><a href="#Channel渠道的命名规范" class="headerlink" title="Channel渠道的命名规范"></a>Channel渠道的命名规范</h4><p>1.可以由英文字母、阿拉伯数字、下划线、中划线、空格、括号组成，可以含汉字以及其他明文字符，但是不建议使用中文命名，会出现乱码。</p>
<p>2.首尾字符不可以为空格。</p>
<p>3.不要使用纯数字作为渠道ID。</p>
<p>4.最多256个字符。</p>
<p>5.”unknown” 及其各种大小写形式，作为【友盟+】保留的字段，不可以作为渠道名。</p>
<p>在您查看数据时，渠道会作为一个数据细分的维度。</p>
<h3 id="通用接口"><a href="#通用接口" class="headerlink" title="通用接口"></a>通用接口</h3><h4 id="设置Log开关"><a href="#设置Log开关" class="headerlink" title="设置Log开关"></a>设置Log开关</h4><p>初始化时可以通过该方法设置组件化的 Log 是否输出，默认关闭 Log 输出。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 设置组件化的Log开关</span></span><br><span class="line"><span class="comment">* 参数: boolean 默认为false，如需查看LOG设置为true</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">UMConfigure.setLogEnabled(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<h4 id="设置日志加密"><a href="#设置日志加密" class="headerlink" title="设置日志加密"></a>设置日志加密</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 设置日志加密</span></span><br><span class="line"><span class="comment">* 参数：boolean 默认为false（不加密）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">UMConfigure.setEncryptEnabled(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果参数为true，SDK会对日志进行加密。加密模式可以有效防止网络攻击，提高数据安全性。 </li>
<li>如果参数为false，SDK将按照非加密的方式来传输日志。</li>
<li>如果您没有设置加密模式，SDK的加密模式为false（不加密）。</li>
</ul>
<h1 id="移动统计集成"><a href="#移动统计集成" class="headerlink" title="移动统计集成"></a>移动统计集成</h1><h2 id="自动集成-1"><a href="#自动集成-1" class="headerlink" title="自动集成"></a>自动集成</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile <span class="string">'com.umeng.sdk:common:latest.integration'</span></span><br><span class="line">    compile <span class="string">'com.umeng.sdk:analytics:latest.integration'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="手动集成-1"><a href="#手动集成-1" class="headerlink" title="手动集成"></a>手动集成</h2><p>将下载的SDK zip包解压缩，得到如下文件：</p>
<ul>
<li>common/common_android_x.x.x/normal/umeng-common-x.x.x.jar // 基础组件包</li>
<li>analytics/analytics_android_x.x.x/umeng-analytics-x.x.x.jar // 统计SDK包</li>
<li>thirdparties/thirdparties_android_1.x.x/utdid4all-1.x.x.x_proguard.jar // 包含设备标识UTDID组件</li>
<li>thirdparties/thirdparties_android_x.x.x/SecurityEnvSDK/<em>.</em> // 金融风控组件，包含一个jar包和多个so库</li>
</ul>
<p>集成步骤：</p>
<ul>
<li>选择SDK功能组件并下载，解压.zip文件得到相应组件包（例如：umeng-common-x.x.x.jar、umeng-analytics-x.x.x.jar等），在Android Studio的项目工程libs目录中拷入相关组件jar包。</li>
<li>右键Android Studio的项目工程 —&gt; 选择Open Module Settings —&gt; 在  Project Structure弹出框中 —&gt; 选择 Dependencies选项卡 —&gt; 点击左下“＋” —&gt;  选择组件包类型 —&gt; 引入相应的组件包。</li>
</ul>
<blockquote>
<p>注意：umeng-common-x.x.x.jar为基础组件包，必须导入。</p>
</blockquote>
<h2 id="初始化及通用接口-1"><a href="#初始化及通用接口-1" class="headerlink" title="初始化及通用接口"></a>初始化及通用接口</h2><h3 id="初始化-1"><a href="#初始化-1" class="headerlink" title="初始化"></a>初始化</h3><p>在宿主应用application.onCreate函数中调用基础组件包提供的初始化函数： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">注意: 即使您已经在AndroidManifest.xml中配置过appkey和channel值，也需要在App代码中调用初始化接口（如需要使用AndroidManifest.xml中配置好的appkey和channel值，UMConfigure.init调用中appkey和channel参数请置为null）。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">UMConfigure.init(Context context, String appkey, String channel, <span class="keyword">int</span> deviceType, String pushSecret);</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">注意：如果您已经在AndroidManifest.xml中配置过appkey和channel值，可以调用此版本初始化函数。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">UMConfigure.init(Context context, <span class="keyword">int</span> deviceType, String pushSecret);</span><br></pre></td></tr></table></figure>
<h3 id="设置场景类型接口"><a href="#设置场景类型接口" class="headerlink" title="设置场景类型接口"></a>设置场景类型接口</h3><p>在初始化的 Activity 中调用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MobclickAgent.setScenarioType(mContext, EScenarioType.E_UM_NORMAL);</span><br></pre></td></tr></table></figure>
<ul>
<li><p>context： 当前宿主进程的ApplicationContext上下文。 </p>
</li>
<li><p>etype ： EScenarioType.E_UM_NORMAL 普通统计场景，如果您在埋点过程中没有使用到 U-Game统计接口，请使用普通统计场景。   EScenarioType.E_UM_GAME 游戏场景 ，如果您在埋点过程中需要使用到U-Game 统计接口，则必须设置游戏场景，否则所有的U-Game统计接口不会生效。 </p>
</li>
</ul>
<h3 id="设置-secretkey"><a href="#设置-secretkey" class="headerlink" title="设置 secretkey"></a>设置 secretkey</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MobclickAgent.setSecret(mContext, <span class="string">"s10bacedtyz"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>context ：当前宿主进程的ApplicationContext上下文。 </li>
<li>secretkey ：secretkey需要在【友盟+】网站申请。 </li>
</ul>
<h3 id="设置-Session-启动、App-使用时长等基础数据统计接口-API"><a href="#设置-Session-启动、App-使用时长等基础数据统计接口-API" class="headerlink" title="设置 Session 启动、App 使用时长等基础数据统计接口 API:"></a>设置 Session 启动、App 使用时长等基础数据统计接口 API:</h3><p>在 App 中每个 Activity 的 onResume 方法中调用 MobclickAgent.onResume(context)，在 onPause 方法中调用 MobclickAgent.onPause(context)。 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onResume();</span><br><span class="line">    MobclickAgent.onResume(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onPause();</span><br><span class="line">    MobclickAgent.onPause(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>确保在所有的Activity中都调用 MobclickAgent.onResume() 和onPause()方法，这两个调用不会阻塞应用程序的主线程，也不会影响应用程序的性能。</li>
<li>注意：如果您的Activity之间有继承或者控制关系，请不要同时在父和子Activity中重复添加nPause和nResume方法，否则会造成重复统计，导致启动次数异常增高。(例如：使用TabHost、TabActivity、ActivityGroup时)。</li>
<li>当应用在后台运行超过30秒（默认）再回到前台，将被认为是两次独立的Session(启动)，例如：用户回到home，或进入其他程序，经过一段时间后再返回之前的应用。即被认为是两个独立的Session。</li>
</ul>
<h3 id="设置-session-间隔时长接口"><a href="#设置-session-间隔时长接口" class="headerlink" title="设置 session 间隔时长接口"></a>设置 session 间隔时长接口</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将默认Session间隔时长改为40秒。</span></span><br><span class="line">MobclickAgent.setSessionContinueMillis(<span class="number">1000</span>*<span class="number">40</span>);</span><br></pre></td></tr></table></figure>
<h1 id="消息推送集成"><a href="#消息推送集成" class="headerlink" title="消息推送集成"></a>消息推送集成</h1><h2 id="在友盟创建应用"><a href="#在友盟创建应用" class="headerlink" title="在友盟创建应用"></a>在友盟创建应用</h2><p>在 <a href="http://message.umeng.com" target="_blank" rel="noopener">http://message.umeng.com</a> 上使用你的应用包名创建应用（注：Android Studio请使用 <code>applicationId</code> 作为包名）。 </p>
<h2 id="自动集成-2"><a href="#自动集成-2" class="headerlink" title="自动集成"></a>自动集成</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PushSDK必须依赖基础组件库，所以需要加入对应依赖</span></span><br><span class="line">compile <span class="string">'com.umeng.sdk:common:1.5.3'</span></span><br><span class="line"><span class="comment">//PushSDK必须依赖utdid库，所以需要加入对应依赖</span></span><br><span class="line">compile <span class="string">'com.umeng.sdk:utdid:1.1.5.3'</span></span><br><span class="line"><span class="comment">//PushSDK</span></span><br><span class="line">compile <span class="string">'com.umeng.sdk:push:4.2.0'</span></span><br></pre></td></tr></table></figure>
<h2 id="手动集成-2"><a href="#手动集成-2" class="headerlink" title="手动集成"></a>手动集成</h2><ul>
<li>访问友盟+官网组件化 SDK 下载地址，选择 Android 平台<a href="http://developer.umeng.com/sdk" target="_blank" rel="noopener">下载</a>页面，选择对应业务 SDK 进行下载，并把下载的 zip 文件解压缩（解压后的文件路径不能有中文）；</li>
<li>把解压缩后得到的目录下的<code>thirdparties</code>目录里的<code>utdid4all-*.*.*</code>这个 jar 文件拷贝到项目工程的 libs 目录；</li>
<li>把解压缩后得到的目录下的<code>push</code>目录当做 Module 导入到自己的工程，使用 <code>Import Module</code>。</li>
<li>在 Application Module的build.gradle文件的<code>dependencies</code>下添加<code>implementation project(&#39;:push&#39;)</code>。 </li>
</ul>
<p>如果出现 <code>implementation project(&#39;:push&#39;)</code> 不成功，则查看在 <code>settings.gradle</code> 中是否包含有 <code>include &#39;:push&#39;</code> 。</p>
<blockquote>
<p><strong>注意：</strong></p>
<ul>
<li>PushSDK  4.0默认只提供armeabi和x86两种so文件夹，若主工程中的so文件夹与PushSDK下的so文件夹不一致，则可以有两种方式处理（选择一种即可）：(1)  删除主工程下多余的so文件夹，与PushSDK下的so文件夹保持一致。(2)  下载全平台so文件，添加缺少的so文件夹至PushSDK模块的libs目录下，使PushSDK的so文件夹与主工程的so文件夹保持一致。<a href="http://dev.umeng.com/system/resources/W1siZiIsIjIwMTcvMDMvMTQvMTBfMzdfNDBfMjg5X3NvX2FsbF9wbGF0Zm9ybXMuemlwIl1d/so_all_platforms.zip" target="_blank" rel="noopener">全平台SO文件下载</a></li>
</ul>
</blockquote>
<h2 id="初始化及通用接口-2"><a href="#初始化及通用接口-2" class="headerlink" title="初始化及通用接口"></a>初始化及通用接口</h2><h2 id="初始化-2"><a href="#初始化-2" class="headerlink" title="初始化"></a>初始化</h2><p>在工程的自定义Application类的 <code>onCreate()</code> 方法中调用基础组件包提供的初始化函数。 </p>
<p>方法一：</p>
<p>仅使用代码初始化：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UMConfigure.init(Context context, String appkey, String channel, int deviceType, String pushSecret);</span><br></pre></td></tr></table></figure>
<p>方法二：</p>
<p>如果在AndroidManifest.xml中配置appkey和channel值，可以调用此版本初始化函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UMConfigure.init(Context context, int deviceType, String pushSecret);</span><br></pre></td></tr></table></figure>
<p>在AndroidManifest.xml添加：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta-data    </span><br><span class="line">android:name=&quot;UMENG_APPKEY&quot;    </span><br><span class="line">android:value=&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot; /&gt;</span><br><span class="line">&lt;!-- Channel ID用来标识App的推广渠道，作为推送消息时给用户分组的一个维度。--&gt;&lt;meta-data    </span><br><span class="line">android:name=&quot;UMENG_CHANNEL&quot;    </span><br><span class="line">android:value=&quot;Channel ID&quot; /&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>说明：</strong></p>
<ul>
<li>若同时在AndroidManifest.xml和代码中设置了Channel，则以代码设置的为准。</li>
<li>若在AndroidManifest.xml和代码里均没有设置，则使用Unknown作为Channel ID。</li>
<li>你可以使用20位以内的英文和数字为渠道定名（不要使用纯数字）。</li>
<li><strong>每台设备仅识别首次安装激活的渠道。</strong></li>
</ul>
</blockquote>
<h2 id="注册推送服务"><a href="#注册推送服务" class="headerlink" title="注册推送服务"></a>注册推送服务</h2><p><code>务必</code>在工程的自定义 Application 类的 <code>onCreate()</code> 方法中注册推送服务，无论推送是否开启都需要调用此方法： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PushAgent mPushAgent = PushAgent.getInstance(<span class="keyword">this</span>);</span><br><span class="line"><span class="comment">//注册推送服务，每次调用register方法都会回调该接口</span></span><br><span class="line">mPushAgent.register(<span class="keyword">new</span> IUmengRegisterCallback() &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String deviceToken)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//注册成功会返回device token</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFailure</span><span class="params">(String s, String s1)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意：</strong></p>
<ul>
<li><code>请勿在调用register方法时做进程判断处理（主进程和channel进程均需要调用register方法才能保证长连接的正确建立）。</code>若未按文档要求初始化，则会导致App运行时，弹出toast提示。此时，请参考下文解决。</li>
<li>device token是【友盟+】消息推送生成的用于标识设备的id，长度为44位，不能定制和修改。同一台设备上不同应用对应的device token不一样。</li>
<li>如需手动获取device token，可以调用<code>mPushAgent.getRegistrationId()</code>方法（需在注册成功后调用）。</li>
</ul>
</blockquote>
<h2 id="统计应用启动数据"><a href="#统计应用启动数据" class="headerlink" title="统计应用启动数据"></a>统计应用启动数据</h2><p>在所有的Activity 的<code>onCreate</code> 方法或在应用的<code>BaseActivity</code>的<code>onCreate</code>方法中添加： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PushAgent.getInstance(context).onAppStart();</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意：</strong></p>
<ul>
<li><code>此方法与统计分析sdk中统计日活的方法无关！请务必调用此方法！</code></li>
<li>如果不调用此方法，不仅会导致按照”几天不活跃”条件来推送失效，还将导致广播发送不成功以及设备描述红色等问题发生。可以只在应用的主Activity中调用此方法，但是由于SDK的日志发送策略，有可能由于主activity的日志没有发送成功，而导致未统计到日活数据。</li>
</ul>
</blockquote>
<h2 id="配置ApplicationId"><a href="#配置ApplicationId" class="headerlink" title="配置ApplicationId"></a>配置ApplicationId</h2><p>请确保Application Module的build.gradle文件中的<code>applicationId</code>与资源包名<code>package</code>一致（若不一致，请参考高级功能—自定义资源包名） </p>
<h1 id="社会化分享和第三方登录集成"><a href="#社会化分享和第三方登录集成" class="headerlink" title="社会化分享和第三方登录集成"></a>社会化分享和第三方登录集成</h1><h2 id="自动集成-3"><a href="#自动集成-3" class="headerlink" title="自动集成"></a>自动集成</h2><h2 id="手动集成-3"><a href="#手动集成-3" class="headerlink" title="手动集成"></a>手动集成</h2><ul>
<li>下载最新 SDK 文件；</li>
<li>将main文件夹以及platform（选择你想使用的平台即可）文件下，对应的 res 文件和 jar 文件放入你的工程；</li>
<li>记得同步 libs 文件。</li>
</ul>
<h2 id="添加回调-Activity"><a href="#添加回调-Activity" class="headerlink" title="添加回调 Activity"></a>添加回调 Activity</h2><h3 id="微信"><a href="#微信" class="headerlink" title="微信"></a>微信</h3><p>在包名目录下 com.xxx.xxx 创建wxapi文件夹，新建一个名为<code>WXEntryActivity</code>的activity继承<code>WXCallbackActivity</code> </p>
<h3 id="QQ-和新浪"><a href="#QQ-和新浪" class="headerlink" title="QQ 和新浪"></a>QQ 和新浪</h3><p>QQ与新浪不需要添加Activity，但需要在使用QQ分享或者授权的Activity中，添加： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">        UMShareAPI.get(<span class="keyword">this</span>).onActivityResult(requestCode, resultCode, data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意<code>onActivityResult</code>不可在fragment中实现，如果在fragment中调用登录或分享，需要在fragment依赖的Activity中实现 </p>
<h2 id="配置-Android-Manifest-XML"><a href="#配置-Android-Manifest-XML" class="headerlink" title="配置 Android Manifest.XML"></a>配置 Android Manifest.XML</h2><h3 id="微信-1"><a href="#微信-1" class="headerlink" title="微信"></a>微信</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;activity</span><br><span class="line">           android:name=<span class="string">".wxapi.WXEntryActivity"</span></span><br><span class="line">           android:configChanges=<span class="string">"keyboardHidden|orientation|screenSize"</span></span><br><span class="line">           android:exported=<span class="string">"true"</span></span><br><span class="line">           android:theme=<span class="string">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span><br></pre></td></tr></table></figure>
<h2 id="权限添加"><a href="#权限添加" class="headerlink" title="权限添加"></a>权限添加</h2><p>如果需要使用QQ纯图分享或避免其它平台纯图分享的时候图片不被压缩，可以增加以下权限： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:name=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span>/&gt;   </span><br><span class="line"> &lt;uses-permission android:name=<span class="string">"android.permission.READ_EXTERNAL_STORAGE"</span>/&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Android6-0权限适配"><a href="#Android6-0权限适配" class="headerlink" title="Android6.0权限适配"></a>Android6.0权限适配</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(Build.VERSION.SDK_INT&gt;=<span class="number">23</span>)&#123;</span><br><span class="line">                  String[] mPermissionList = <span class="keyword">new</span> String[]&#123;Manifest.permission.WRITE_EXTERNAL_STORAGE,Manifest.permission.ACCESS_FINE_LOCATION,Manifest.permission.CALL_PHONE,Manifest.permission.READ_LOGS,Manifest.permission.READ_PHONE_STATE, Manifest.permission.READ_EXTERNAL_STORAGE,Manifest.permission.SET_DEBUG_APP,Manifest.permission.SYSTEM_ALERT_WINDOW,Manifest.permission.GET_ACCOUNTS,Manifest.permission.WRITE_APN_SETTINGS&#125;;</span><br><span class="line">                  ActivityCompat.requestPermissions(<span class="keyword">this</span>,mPermissionList,<span class="number">123</span>);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode,</span></span></span><br><span class="line"><span class="function"><span class="params">        String permissions[], <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="初始化-3"><a href="#初始化-3" class="headerlink" title="初始化"></a>初始化</h2><p>初始化需要在您的 Application 中调用我们的初始化接口： </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate();</span><br><span class="line">        UMConfigure.init(<span class="keyword">this</span>,<span class="string">"5a12384aa40fa3551f0001d1"</span></span><br><span class="line">                ,<span class="string">"umeng"</span>,UMConfigure.DEVICE_TYPE_PHONE,<span class="string">""</span>);<span class="comment">//58edcfeb310c93091c000be2 5965ee00734be40b580001a0</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>并且设置各个平台的 appkey</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    PlatformConfig.setWeixin(…………);</span><br><span class="line">    PlatformConfig.setSinaWeibo(…………);</span><br><span class="line">    ……………………</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="签名配置"><a href="#签名配置" class="headerlink" title="签名配置"></a>签名配置</h2><h2 id="分享面板设置"><a href="#分享面板设置" class="headerlink" title="分享面板设置"></a>分享面板设置</h2><p>在需要引用 activity 中设置。</p>
<h3 id="带面板"><a href="#带面板" class="headerlink" title="带面板"></a>带面板</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> ShareAction(MainActivity.<span class="keyword">this</span>).withText(<span class="string">"hello"</span>)                    .setDisplayList(SHARE_MEDIA.SINA,SHARE_MEDIA.QQ,SHARE_MEDIA.WEIXIN)</span><br><span class="line">.setCallback(umShareListener).open();</span><br></pre></td></tr></table></figure>
<h3 id="不带面板"><a href="#不带面板" class="headerlink" title="不带面板"></a>不带面板</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> ShareAction(MainActivity.<span class="keyword">this</span>)</span><br><span class="line">.setPlatform(SHARE_MEDIA.QQ)<span class="comment">//传入平台</span></span><br><span class="line">.withText(<span class="string">"hello"</span>)<span class="comment">//分享内容</span></span><br><span class="line">.setCallback(umShareListener)<span class="comment">//回调监听器</span></span><br><span class="line">.share();</span><br></pre></td></tr></table></figure>
<h3 id="回调监听"><a href="#回调监听" class="headerlink" title="回调监听"></a>回调监听</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> UMShareListener shareListener = <span class="keyword">new</span> UMShareListener() &#123;</span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@descrption</span> 分享开始的回调</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> platform 平台类型</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">(SHARE_MEDIA platform)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@descrption</span> 分享成功的回调</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> platform 平台类型</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onResult</span><span class="params">(SHARE_MEDIA platform)</span> </span>&#123;</span><br><span class="line">           Toast.makeText(ShareDetailActivity.<span class="keyword">this</span>,<span class="string">"成功                                        了"</span>,Toast.LENGTH_LONG).show()；</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@descrption</span> 分享失败的回调</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> platform 平台类型</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> t 错误原因</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(SHARE_MEDIA platform, Throwable t)</span> </span>&#123;</span><br><span class="line">           Toast.makeText(ShareDetailActivity.<span class="keyword">this</span>,<span class="string">"失                                            败"</span>+t.getMessage(),Toast.LENGTH_LONG).show();</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">/**</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@descrption</span> 分享取消的回调</span></span><br><span class="line"><span class="comment">        * <span class="doctag">@param</span> platform 平台类型</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">(SHARE_MEDIA platform)</span> </span>&#123;</span><br><span class="line">           Toast.makeText(ShareDetailActivity.<span class="keyword">this</span>,<span class="string">"取消                                          了"</span>,Toast.LENGTH_LONG).show();</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure>
<h2 id="第三方登录"><a href="#第三方登录" class="headerlink" title="第三方登录"></a>第三方登录</h2><p>第三方登录包含两种使用场景：</p>
<p>获取用户资料的授权接口，使用该接口可以获取该三方平台返回的所有资料（包括姓名，性别，头像等）目前支持第三方登录的平台包括：</p>
<ul>
<li>国内平台（微信、新浪微博、QQ、豆瓣、人人）</li>
<li>国外平台（Facebook、Twitter、linkedIn、kakao、VKontakte、Dropbox）</li>
</ul>
<p>这里推荐直接使用第一种方式实现，因为本质上三方登录最终都需要拉取三方平台的用户资料，从这点来说，直接调用SDK和通过后台服务器请求，安全性是一样的</p>
<h3 id="获取用户资料"><a href="#获取用户资料" class="headerlink" title="获取用户资料"></a>获取用户资料</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UMShareAPI.get(MainActivity.<span class="keyword">this</span>).getPlatformInfo(MainActivity.<span class="keyword">this</span>, SHARE_MEDIA.WEIXIN, umAuthListener);</span><br></pre></td></tr></table></figure>
<h3 id="授权回调"><a href="#授权回调" class="headerlink" title="授权回调"></a>授权回调</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">UMAuthListener authListener = <span class="keyword">new</span> UMAuthListener() &#123;</span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@desc</span> 授权开始的回调</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> platform 平台名称</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onStart</span><span class="params">(SHARE_MEDIA platform)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@desc</span> 授权成功的回调</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> platform 平台名称</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> action 行为序号，开发者用不上</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> data 用户资料返回</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onComplete</span><span class="params">(SHARE_MEDIA platform, <span class="keyword">int</span> action, Map&lt;String, String&gt; data)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">            Toast.makeText(mContext, <span class="string">"成功了"</span>, Toast.LENGTH_LONG).show();</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@desc</span> 授权失败的回调</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> platform 平台名称</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> action 行为序号，开发者用不上</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> t 错误原因</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(SHARE_MEDIA platform, <span class="keyword">int</span> action, Throwable t)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">           Toast.makeText(mContext, <span class="string">"失败："</span> + t.getMessage(),                                     Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@desc</span> 授权取消的回调</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> platform 平台名称</span></span><br><span class="line"><span class="comment">         * <span class="doctag">@param</span> action 行为序号，开发者用不上</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancel</span><span class="params">(SHARE_MEDIA platform, <span class="keyword">int</span> action)</span> </span>&#123;</span><br><span class="line">            Toast.makeText(mContext, <span class="string">"取消了"</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>
<p>登录成功后，第三方平台会将用户资料传回， <strong>全部会在Map data中返回</strong> ，由于各个平台对于用户资料的标识不同，因此为了便于开发者使用，我们将一些常用的字段做了统一封装，开发者可以直接获取，不再需要对不同平台的不同字段名做转换，这里列出我们封装的字段及含义。 </p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2018-07-21T08:47:14.915Z" itemprop="dateUpdated">2018-07-21 16:47:14</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="http://yoursite.com">
            <img src="/img/husky.jpg" alt="wekingtan">
            wekingtan
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/友盟/">友盟</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2018/07/20/友盟练习/&title=《友盟练习》 — 你好，我叫weking&pic=http://yoursite.com/img/husky.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2018/07/20/友盟练习/&title=《友盟练习》 — 你好，我叫weking&source=能讲究，能将就" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2018/07/20/友盟练习/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《友盟练习》 — 你好，我叫weking&url=http://yoursite.com/2018/07/20/友盟练习/&via=http://yoursite.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://yoursite.com/2018/07/20/友盟练习/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/07/20/初探 RxJava 2/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">初探 RxJava 2</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/07/19/内存优化与内存泄露/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">内存优化与内存泄露</h4>
      </a>
    </div>
  
</nav>



    

















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大佬
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>wekingtan &copy; 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2018/07/20/友盟练习/&title=《友盟练习》 — 你好，我叫weking&pic=http://yoursite.com/img/husky.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2018/07/20/友盟练习/&title=《友盟练习》 — 你好，我叫weking&source=能讲究，能将就" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://yoursite.com/2018/07/20/友盟练习/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《友盟练习》 — 你好，我叫weking&url=http://yoursite.com/2018/07/20/友盟练习/&via=http://yoursite.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://yoursite.com/2018/07/20/友盟练习/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIElEQVR42u3aQY7jMAwEwPn/p73XAXbH6aa8A1gqnYzEkVQ5ECSlr694XN/GT9/ev//3c/KrhwcGBsZrGdftuH8nmTmZoV33H6tjYGAcwEg2MYt7eWzM18XAwMBIpktSvRzW/n0YGBgY99NdwbgvZZNPMDAwMGZF7KxZlm/rl2pxDAyMFzLy0vT3n//L+QYGBsarGFc58qb/SiJY7woDA2NrRh7gEkwy27BATfaDgYFxAKMNl7NA2SaFRcGMgYGxKSNZpi0+23bbA2AMDIytGW2zPtlEexUjb/MNX8XAwNiOkRwTLjXFAmQe+jEwME5gtNca8lQyCcqz1h4GBsaZjLxB3x4PzI4T6nIaAwPjGMas4ZVQk1DblsfFnREMDIyXM2YJ3Hoi2P59xQ4xMDA2ZayncW2hm1/vKJJUDAyMTRmz8rU9SGgPANokFQMDY2/GU6389gLHSnFbXMXAwMDYiFEHspK9vt3kCAEDA+McRl6mtgnffaMt2ug9GwMD4xjGLCzW1yOCN9vZMDAwzmHMGmFtiy0vZZMrthgYGGcyZsVkC5utW3f4MDAwXs64yjELiM9eXf0xKcTAwNiUsR7T2kC8UqY+EKAxMDBey2gvvrekNhFM9oCBgXEmI2/3z8DrBfAHDAYGBkaQ0iWfr2z3Q/jGwMDAGD0/exT64bcYGBgHMJKEb6XFNttu0fLDwMDYmjG7WrGywD11xsbAwNiU8QfFSCy6Bx1CLwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
